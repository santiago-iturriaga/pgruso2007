%% LyX 1.5.3 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[english]{article}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage{url}
\usepackage{graphicx}

\makeatletter
\usepackage{babel}
\makeatother

\begin{document}

\title{Fenton - Manual de Usuario Administrador}


\author{Damián Pintos - Santiago Iturriaga - Paulo Maya}

\maketitle
\newpage{}

\tableofcontents{}

\newpage{}


\section{Introducción}

Fenton presenta una interfaz gráfica amigable para que un usuario
pueda utilizar un cluster previamente configurado para este fin, sin
necesidad de conocer los pormenores de su funcionamiento. Para ésto
el sistema cuenta con dos niveles de usuarios: clientes y administradores.
Los clientes mantendrán sus archivos en el cluster, ejecutarán procesos
y obtendrán los resultados de los mismos. Por otro lado los administradores
mantendrán la información necesaria para que el sistema funcione correctamente.
El presente documento describe la interfaz presentada al usuario administrador.

Las distintas vistas del administrador están orientadas hacia un usuario
con ciertos conocimientos mínimos, tanto del funcionamiento del cluster
como de manejo de aplicaciones. Por lo tanto, en la mayoría de los
casos, las funcionalidades son más prácticas que amigables. De esta
manera, un usuario que utilice frecuentemente el sistema necesitará
pocos pasos para obtener el objetivo buscado, mas allá de que en una
primera aproximación deba recurrir al manual más de una vez.


\section{Ingreso al sitio}

\includegraphics[scale=0.5]{01login}

El usuario deberá ingresar su nombre de usuario y su clave. Por seguridad,
en caso de que alguno de los valores sea incorrecto no se indicará
de cuál de los dos se trata. Inicialmente existe un usuario administrador
con nombre GROSO y clave del FENTON O ALGO, pero luego de haber ingresado
al sitio, el administrador podrá modificar la clave o agregar un nuevo
administrador y borrar el usuario inicial.


\section{Inicio}

\includegraphics[scale=0.35]{02Aindex}

Inicialmente al administrador se le presentarán las opciones por categorías:

\begin{itemize}
\item Usuarios: manejo de usuarios, clientes y trabajos.
\item Estado del cluster: interfaz con Ganglia.

\begin{itemize}
\item Ganglia permite monitorear el estado de los nodos del cluster y consultar
la disponibilidad de recursos (memoria, procesador, etc.)
\end{itemize}
\item Maui: interfaz con Maui.

\begin{itemize}
\item Maui se encarga de despachar los trabajos en la cola de ejecución
del sistema evaluando diferentes propiedades (prioridad del trabajo,
recursos necesarios para la ejecución, etc.). 
\end{itemize}
\item Torque: interfaz con Torque.

\begin{itemize}
\item Torque es quien administra los recursos disponibles del sistema y
es el encargado de iniciar la ejecución de un trabajo cuando Maui
se lo ordena.
\end{itemize}
\item Alertas: acceso a las alertas recibidas.
\end{itemize}

\section{Usuarios}

El manejo de usuarios del sistema está subdividido por:

\begin{itemize}
\item Usuarios - Grupos: creación de grupos del sistema, creación de usuarios
y asignación de usuarios a grupos.
\item Accesos: asociación de grupos a los respectivos trabajos definidos
en el sistema.
\item Clientes - Trabajos: creación de clientes y trabajos.
\item Papelera: mantenimiento de trabajos dados de baja.
\item Usuarios - Alertas: asignación de usuarios a las alertas generales
del sistema.
\end{itemize}
\includegraphics[scale=0.35]{usuarios}

Cada usuario del sistema estará asociado a un grupo. A su vez cada
grupo tendrá acceso a uno o más trabajos. Por ejemplo, mientras que
el usuario administrador seguramente deberá tener acceso a todos los
trabajos, un usuario final probablemente tendrá acceso a un único
trabajo. 

A su vez, cada trabajo estará asociado a un cliente. Cada cliente
del sistema tendrá un usuario linux asociado, por lo que es importante
recordar que todos los trabajos que se ejecuten para un mismo cliente,
tendrán el mismo usuario linux. 


\subsection{Usuarios - Grupos}

\includegraphics[scale=0.35]{03AUsuariosGrupos}

Cada usuario del sistema tendrá un nombre de usuario, una dirección
de correo electrónico y una contraseña. Cada uno es creado bajo un
grupo, seleccionándolo y presionando el boton {}``Nuevo'' en la
tabla que lista los usuarios. Es posible también eliminar usuarios
del sistema.

Para crear un nuevo grupo es necesario presionar el botón {}``Nuevo...''
que se encuentra a la derecha de la lista de grupos del sistema. Luego
se deberá ingresar un nombre para el mismo y asociarle las funcionalidades
pertinentes.


\subsection{Accesos}

\includegraphics[scale=0.35]{04AAccesos}

Para administrar los accesos a los trabajos del sistema, se deberá
seleccionar un grupo. A continuación se mostrarán todos los pares
cliente - trabajo dados de alta en el sistema. Simplemente seleccionando
cada casilla se le estará dando acceso a todos los integrantes del
grupo a los respectivos trabajos.


\subsection{Clientes - Trabajos}

\includegraphics[scale=0.35]{05ACT}

Para crear un nuevo trabajo es necesario tener por lo menos un cliente
creado. Para esto se deberá presionar el botón {}``Nuevo'' (a la
derecha de la lista de clientes). A continuación se mostrarán los
campos a llenar:

\begin{itemize}
\item nombre: nombre descriptivo del cliente.
\item usuario linux: usuario con el que se correrán los trabajos del cliente.
\end{itemize}
Luego de haber creado el cliente, se presentará la opción de crear
un nuevo trabajo para el mismo presionando el botón {}``Nuevo''
mostrado en la tabla de trabajos. A continuación se mostrarán los
campos a llenar:

\begin{itemize}
\item nombre: nombre descriptivo del trabajo.
\item nodos: cantidad de nodos sobre los que se correrá cada ejecución.
\item tiempo máximo: tiempo máximo que se le dará a cada ejecución dentro
del trabajo.
\item cola: cola en la que se colocará cada ejecución del trabajo.
\item quota: espacio disponible en disco para el trabajo (en MB).
\end{itemize}
\includegraphics[scale=0.35]{06AACT2}

En cualquier momento el administrador podrá eliminar tanto los trabajos
como los clientes. Si elimina un trabajo, ningún usuario tendrá acceso
al mismo, pero este podrá ser restaurado desde la papelera. Por otro
lado, si elimina un cliente, será eliminado físicamente junto con
sus respectivos trabajos, incluyendo los archivos guardados en disco.


\subsection{Papelera}

Desde la papelera es posible tanto eliminar como restaurar los trabajos.
Si se elije eliminarlos, se borrarán los archivos guardados en disco
junto con el resto de la información del trabajo. Si se elije restaurarlos,
los usuarios podrán nuevamente tener acceso a los mismos.

\includegraphics[scale=0.35]{07APapelera}


\subsection{Usuarios - Alertas}

Existe un grupo {}``virtual'' de usuarios a los cuales le seran
asignadas alertas , definidas de interes general, del sistemas. Estas
alertas avisan a los usuarios del grupo de algun problema o situación
importante o critica del sistema, por ejemplo si algun trabajo de
un usuario supero su cuota de espacio en disco.

Para agregar un usuario a este grupo debemos seleccionarlo del combo
de usuarios y seleccionar {}``Agregar''.

\includegraphics[scale=0.35]{08AUA}


\section{Maui}

Desde la pantalla principal de Maui podemos chequear el estado del
servicio de Maui en el nodo maestro del cluster. Es necesario que
el servicio de Maui se encuentre en ejecución para poder iniciar nuevos
trabajos en el sistema, de lo contrario los trabajos quedaran en cola
de espera indefinidamente.

\includegraphics[scale=0.35]{09AMaui}

El servicio de Maui no debe correr con el usuario root, debe correr
con el usuario configurado como administrador de Maui.


\subsection{Trabajos}

En la subcategoría de trabajos Maui nos presenta todos los trabajos
del sistema.

\includegraphics[scale=0.35]{10AMauiT}

Los trabajos se encuentran agrupados según su estado:

\begin{itemize}
\item En ejecución. Los trabajos en ejecución, tal como su nombre lo dice,
son los trabajos que estan siendo ejecutados actualmente en el sistema.
Por esta razón estos trabajos estan consumiendo recursos del sistema.
En el listado de trabajos se muestran estadísticas de cada trabajo
en ejecución: cantidad de procesadores, tiempo de ejecución actual,
etc.
\item En espera. Los trabajos en espera son trabajos que aún no han sido
iniciados en el sistema. Se disponen de los recursos necesarios para
su ejecución pero estos aún no se encuentran disponibles. Al igual
que para el caso anterior podemos ver información de estos trabajos:
prioridad, tiempo de ejecución asignado, etc.
\item Bloqueados. Finalmente, los trabajos bloqueados son trabajos que no
serán ejecutados por alguna razón. Puede tratarse de trabajos que
requieran mas recursos de los que se dispone en la totalidad del cluster,
trabajos que consumieron mas recursos de los asignados (p.ej. han
estado ejecutando por demasiado tiempo), trabajos que fueron detenidos
manualmente por parte de un administrador, etc.
\end{itemize}
Cualquiera sea el estado del trabajo puede consultarse información
adicional del mismo haciendo click sobre el identificador del trabajo
y sobre el botón de información (botón de mas a la izquierda).


\subsection{Nodos}

\includegraphics[scale=0.35]{11AMauiN}

Maui presenta también información de los nodos del cluster: estado
(activo, ocioso, disponible, etc.), cantidad de procesadores (disponibles
y utilizados), cantidad de memoria (disponible y utilizada), sistema
operativo, etc.


\subsection{Configuración}

La configuración de Maui define varios parámetros. Desde la frecuencia
con la que se realiza el procesamiento de los trabajos en Torque a
la política de despacho que se va a utilizar.

\includegraphics[scale=0.35,bb = 0 0 200 100, draft, type=eps]{31AConf.png}

Maui realiza una despachamiento de trabajos utilizando una política
de despacho predeterminada, pero esta política puede ajustarse para
lograr un máximo despempeño del cluster. Estas configuraciones avanzadas
se encuentran detalladas en \url{http://www.clusterresources.com/products/maui/docs/}.


\section{Torque}

La pantalla principal de Torque, al igual que Maui, nos informa del
estado de los servicios de Torque en el cluster.

\includegraphics[scale=0.35]{13ATorque}

Torque cuenta con dos demonios:

\begin{itemize}
\item qserverd: este demonio debe contar solamente con una instancia en
ejecución y debe ejecutar en el nodo maestro del cluster. Es necesario
que este servicio se encuentre en ejecución para el funcionamiento
del cluster.
\item qnoded: este demonio debe estar en ejecución en cada nodo de cómputo
del cluster. En la pantalla de información de Torque solamente se
muestra el estado del demonio en el nodo maestro. No es necesario
que este servicio se encuentre en ejecución para el funcionamiento
del sistema, si no se encuentra en ejecución simplemente el nodo maestro
no será utilizado como nodo de cómputo.
\end{itemize}
Ambos servicios de Torque deben ejecutar con el usuario root.


\subsection{Trabajos}

\includegraphics[scale=0.35]{14ATorqueT}

En el submenú de trabajos de Torque podemos ver todos los trabajos
del sistema; los que se encuentran en ejecución, los que se encuentran
en espera para iniciar su ejecución, los recientemente finalizados
y los detenidos.

Además se muestra información de los trabajos (usuario que lo ejecuta,
tiempo de ejecución, etc.) y permite realizar acciones básicas sobre
ellos (detener, iniciar, etc.).


\subsection{Colas}

\includegraphics[scale=0.35]{15ATorqueC}

Torque maneja un conjunto de colas de ejecución en donde son ingresados
los trabajos para ser ejecutados y de donde Maui evalúa cual será
el siguiente trabajo a ejecutar. Estas colas tienen ciertas propiedades
que agrupan a los trabajos, p.ej.: prioridad de ejecución, tiempo
máximo de ejecución, etc.

Una cola pueden ser detenida. Cuando una cola es detenida son detenidos
todos los trabajos de la misma.


\subsection{Nodos}

Torque mantiene información de todos los nodos del cluster. En la
interfaz de nodos de Torque se muestran todos los nodos del cluster
junto con su estado, la cantidad de procesadores con la que cuentan,
si estan ejecutando un trabajo, etc. Además nos ofrece la posibilidad
de dar de baja un nodo temporalmente para que no sea tenido en cuenta
al momento de la ejecución de trabajos.

\includegraphics[scale=0.35]{16ATorqueE}


\subsection{Estado}

El submenú de estado muestra información del servicio del nodo maestro
de Torque (qserverd).

\includegraphics[scale=0.35]{17ATorqueE}

Se presenta información sobre la cantidad de trabajos en ejecución,
el estados de los trabajos (cuantos encolados, cuantos detenidos,
cuantos ejecutando, etc.), quienes son los usuarios administradores
y operadores de Torque, la versión de Torque que se está ejecutando,
etc.


\subsection{Ejecuciones}

El administrador del sistema podrá ver las ejecuciones de todos los
trabajos, teniendo además la opción de ver la salida de Torque presionando
el botón {}``ver log''.

\includegraphics[scale=0.35]{18ATorqueEj}


\section{Alertas}

Los usuarios Adminstradores al igual que los demas usuarios reciben
alertas del sistemas las cuales podran visualizar en el menu Alertas.

Podemos ver el cliente y trabajo al cual hace referencia la alerta;
fecha y asunto de la alerta.

\includegraphics[scale=0.35]{19AAlertas}

Si seleccionamos el link {}``Ver'' en el costado derecho de la grilla
de alertes se muestra la información completa de la misma.

Desde esta página también podemos eliminar la alerta con el boton
Eliminar.

\includegraphics[scale=0.35]{20AAlertas2}
\end{document}
